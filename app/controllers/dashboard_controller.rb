class DashboardController < ApplicationController
	before_action :authenticate_user!
  def index
    @currentUser = current_user.id
    @analyses = Analysis.all.where(user_id: @currentUser).order(analysis_date: :desc)
    @numberOfAnalysis = Analysis.where(user_id: @currentUser).count
    @numberOfAnalysisCompleted = Analysis.where(user_id: @currentUser).where(is_scan_completed: 1).count
    @numberOfAnalysisPending = Analysis.where(user_id: @currentUser).where(is_scan_completed: 0).count
    @detectedFlaws = Analysis.joins("INNER JOIN security_flaws ON security_flaws.analyses_id = analyses.id AND analyses.user_id = 1").count
  end
end
